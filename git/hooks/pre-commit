#!/usr/bin/bash

BRANCH=$(git rev-parse --abbrev-ref HEAD)
CONSOLE_DOT_LOG=$(rg 'console\.log')

if [[ "$BRANCH" =~ ^(?:develop|master|main)$ ]]
then
    echo "You can't commit directly to $BRANCH branch"
    exit 1
elif [[ $(rg '(?:it|describe)\.only') ]]
then
    echo '"only" detected!'
    exit 1
elif [[ "$CONSOLE_DOT_LOG" ]]
then
    echo "'console-dot-log' found!"
    echo "$CONSOLE_DOT_LOG"
    exit 1
fi

# vim: ft=sh
